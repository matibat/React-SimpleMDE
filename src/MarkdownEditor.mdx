---
name: MarkdownEditor-MD编辑器
menu: 区块级组件
route: /markdownEditor
---
import { Playground, Props } from 'docz';
import {MarkdownEditor, MarkdownEditorField} from './index'
import * as Docs from './Doc'
import SimpleMDE from 'simplemde'

# Markdown编辑器

- 简介：Markdown文本编辑器，改造自[simplemde-markdown-editor](https://github.com/sparksuite/simplemde-markdown-editor)
- 功能：
  - 不依赖jQuery
  - 支持自定义工具栏，工具栏icon使用base64，无序处理图片问题
  - 双栏、全屏预览
  - 选择本地图片
  - 默认**支持DOMPurify**，规避XSS安全问题……
- 负责人: tylerccwang



## MarkdownEditor(MarkdownEditorProps)基本用法

<Playground>
  {
    () => {
      const el = React.useRef();
      const [value, setValue] = React.useState();
      const [html, setHtml] = React.useState('');
      function onSubmit() {
        if (el.current) {
          setValue(el.current.mdValue)
          setHtml(el.current.html)
        }
      }
      function onReset() {
        if (el.current) {
          el.current.mdValue = '';
        }
      }
      return (
        <>
          <MarkdownEditor ref={el} height={600} editorConfig={{status: []}} initialValue={Docs.md} />
          <button onClick={onSubmit} style={{marginRight: 20}}>提交</button>
          <button onClick={onReset}>重置</button>
          <div style={{display: 'flex'}}>
            <pre style={{flex: 1, height: 200, overflow: 'scroll'}}>{value}</pre>
            <pre style={{flex: 1, height: 200, overflow: 'scroll'}}><code>{html}</code></pre>
          </div>
        </>
      )
    }
  }
</Playground>

### 使用说明 

  - 通过`ref`获得组件实例方法来使用API
    - `const md = ref.mdValue`获取md内容
    - `ref.mdValue = md`设置md内容
    - `const html = ref.html`获取html内容
    - **`ref.$editor`直接获取SimpleMd的实例(SimpleMarkdownEditor)**
  - `MarkdownEditor`中提供静态属性
    - `MarkdownEditor.ToolBarFuncs`: 工具栏函数集合
    - `MarkdownEditor.defaultToolBar`: 默认的工具栏

## 表单MarkdownEditorField组件

支持传入`value`和`onChange`，注意，可能会有性能问题。

<Playground>
  {
    () => {
      const [value, setValue] = React.useState(Docs.md);
      const [html, setHtml] = React.useState('');
      function onChange(md,html) {
        setValue(md);
        setHtml(html);
      }
      return (
        <>
          <MarkdownEditorField value={value} toolbar={false} height={400} onChange={onChange} />
          <div style={{display: 'flex'}}>
            <pre style={{flex: 1, height: 200, overflow: 'scroll'}}>{value}</pre>
            <pre style={{flex: 1, height: 200, overflow: 'scroll'}}><code>{html}</code></pre>
          </div>
        </>
      )
    }
  }
  
</Playground>

## 自定义toolbar

通过`toolbar`props来设置工具栏

- 默认显示
- boolean值
- 设置数组`(MarkdownEditorToolBarName | MarkdownEditorToolBarItem)[]`;

```typescript
export interface MarkdownEditorToolBarItem {
  name: MarkdownEditorToolBarName | string;
  action?: ((editor: SimpleMarkdownEditor) => void) | string;
  className?: string;
  title?: string;
}

export type MarkdownEditorToolBarName =
'bold' |
'italic' |
'strikethrough' |
'heading' |
'heading-smaller' |
'heading-bigger' |
'heading-1' |
'heading-2' |
'heading-3' |
'code' |
'quote' |
'unordered-list' |
'ordered-list' |
'clean-block' |
'link' |
'image' |
'choose-image' |
'table' |
'horizontal-rule' |
'preview' |
'side-by-side' |
'fullscreen' |
'undo' |
'redo' |
'guide';
```

## `mdToHTML()` 和 `htmlDomSanitize()`;

- 导出了markdown转换为HTML的`mdToHTML`函数
- 导出了HTML DOM Purify的`htmlDomSanitize`函数


## 属性

### 组件支持属性MarkdownEditorProps
<Props of={Docs.MarkdownEditorProps} />

### Editor配置类型MarkdownEditorConfig

<Props of={Docs.MarkdownEditorConfig} />


### 底层Editor属性SimpleMarkdownEditor

<Props of={Docs.SimpleMarkdownEditor} />

